{% extends 'app1/base.html' %}
{% load staticfiles %}
{% block content %}
<html lan=fr>
    <head>
        <meta charset="utf-8" />
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="http://code.highcharts.com/maps/modules/map.js"></script> 
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <script src="http://highcharts.github.io/export-csv/export-csv.js"></script>
        <!--
        <script src="{% static 'app1/highcharts/js/highcharts.js' %}"></script>
        <script src="{% static 'app1/highcharts/js/modules/maps.js' %}"></script>
        <script src="{% static 'app1/highcharts/js/modules/exporting.js' %}"></script>
        <script src="{% static 'app1/highcharts/export-csv-master/export-csv.js' %}"></script>
        -->
    </head>
    <body>
        <script type="text/javascript">
            // Prepare random data
            var mapdatas = {{ mapdatas|safe }};
            var shape = mapdatas.shape;
            var districts = mapdatas.districts;
            var dates = mapdatas.dates;
            var datas = mapdatas.vmean;
            var Garango = mapdatas.Garango;
            alert(datas);
            //var data = [{'code': 'Karangasso_Vigue', 'value': 0.6225429496176412}, {'code': 'Gaoua', 'value': 'null'}, {'code': 'Diebougou', 'value': 0.8062600924800936}, {'code': 'Dano', 'value': 1.0421408039331437}, {'code': 'Batie', 'value': 'null'}, {'code': 'Sebba', 'value': 0.4908431311496017}, {'code': 'Gorom_Gorom', 'value': 0.48435419808903679}, {'code': 'Dori', 'value': 0.46151743073254242}, {'code': 'Djibo', 'value': 0.4836147259913788}, {'code': 'Zorgho', 'value': 0.5489589629751264}, {'code': 'Ziniare', 'value': 0.5491575348563178}, {'code': 'Bousse', 'value': 0.5020820316876082}, {'code': 'Yako', 'value': 0.48409751609187507}, {'code': 'Titao', 'value': 0.47974599248174726}, {'code': 'Seguenega', 'value': 0.44509283122263454}, {'code': 'Ouahigouya', 'value': 0.51616781599464201}, {'code': 'Gourcy', 'value': 0.49986072553737648}, {'code': 'Lena', 'value': 0.582056435751405}, {'code': 'Hounde', 'value': 0.8036961638570087}, {'code': 'Do', 'value': 'null'}, {'code': 'Dande', 'value': 0.5297948651062292}, {'code': 'Dafra', 'value': 0.5345372831247873}, {'code': 'Pama', 'value': 0.5283923525507336}, {'code': 'Manni', 'value': 0.46623016969213926}, {'code': 'Gayeri', 'value': 0.49761002806037463}, {'code': 'Fada_N_goourma', 'value': 0.4996532389892319}, {'code': 'Diapaga', 'value': 0.5382738238415175}, {'code': 'Bogande', 'value': 0.497183996766682}, {'code': 'Sapone', 'value': 0.5434547255932105}, {'code': 'Po', 'value': 0.6128212456766626}, {'code': 'Manga', 'value': 0.6377432831219937}, {'code': 'Kombissiri', 'value': 0.6013304033759584}, {'code': 'Sapouy', 'value': 0.6125501824644046}, {'code': 'Reo', 'value': 0.5818848204293271}, {'code': 'Nanoro', 'value': 0.5375101005556846}, {'code': 'Koudougou', 'value': 0.5660955397058725}, {'code': 'Kongoussi', 'value': 0.44870245424611716}, {'code': 'Kaya', 'value': 0.50477947709559368}, {'code': 'Boulsa', 'value': 0.5017623263097983}, {'code': 'Barsalo', 'value': 0.5065877487213819}, {'code': 'Zabre', 'value': 0.5945506125740025}, {'code': 'Tenkodogo', 'value': 0.5646833169612386}, {'code': 'Pouytenga', 'value': 0.5097495702592222}, {'code': 'Ouargaye', 'value': 0.5438344537891008}, {'code': 'Koupela', 'value': 0.5256567964588308}, {'code': 'Garango', 'value': 0.584325021151007}, {'code': 'Bitto', 'value': 0.5966151052452499}, {'code': 'Boulmiougou', 'value': 0.5514164529137713}, {'code': 'Bogodogo', 'value': 0.5516253529349342}, {'code': 'Baskuy', 'value': 0.56757334470748899}, {'code': 'Sindou', 'value': 0.4892013506498007}, {'code': 'Mangodara', 'value': 'null'}, {'code': 'Banfora', 'value': 'null'}, {'code': 'Tougan', 'value': 0.531635488675728}, {'code': 'Toma', 'value': 0.5673028892727101}, {'code': 'Solenzo', 'value': 0.5138033154090391}, {'code': 'Nouna', 'value': 0.5279350259351179}, {'code': 'Dedougou', 'value': 0.5946920811712283}, {'code': 'Boromo', 'value': 0.7555713555597244}, {'code': 'Signoghin', 'value': 0.5468449709247741}, {'code': 'Nongre Masson', 'value': 0.53235978897286473}, {'code': 'Orodara', 'value': 0.47773796559691617}, {'code': 'Leo', 'value': 0.6759480924924484}];
            $(function () {
                
                $.getJSON("{% static 'app1/shapes/' %}"+shape, function (geojson) {
            
                    // Initiate the chart
                    $('#mapcontainer').highcharts('Map', {
            
                        title : {
                            text : 'Statistiques de '+shape
                        },
            
                        mapNavigation: {
                            enabled: true,
                            buttonOptions: {
                                verticalAlign: 'bottom'
                            }
                        },
            
                        colorAxis: {
                        },
            
                        series : [{
                            data : [],
                            mapData: geojson,
                            joinBy: ['code', 'dist_sanit'],
                            name: 'vmean',
                            states: {
                                hover: {
                                    color: '#BADA55'
                                }
                            },
                            dataLabels: {
                                enabled: true,
                                format: '{point.properties.dist_sanit}'
                            }
                        }],
                        credits: {
                            enabled: false                
                        },
                    });
                });
            });
            $(function () {
                $('#plotcontainer').highcharts({
                    chart: {
                        zoomType: 'xy',
                    },
                    title: {
                        text: 'Daily ',
                        x: -20 //center
                    },
                    subtitle: {
                        text: 'Climatologie CRC',
                        x: -20
                    },
                    xAxis: {
                        categories: dates
                    },
                    yAxis: {
                        title: {
                            text: ' (°C)'
                        },
                        plotLines: [{
                            value: 0,
                            width: 0.5,
                            color: '#808080'
                        }]
                    },
                    tooltip: {
                        valueSuffix: '°C'
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    plotOptions: {
                        area: {
                            fillOpacity: 0.3,
                            stacking: 'normal',
                            lineWidth: 3,
                            marker: {
                                lineWidth: 3,
                                enabled: true
                            }
                        }
                    },
                    series: [{
                        name: 'Garango',
                        data: Garango
                    }],
                    credits: {
                        enabled: false                
                    },
                });
            });
        </script>
        <div id="mapcontainer"></div>
        <div id="plotcontainer"></div>
    </body>
</html>
{% endblock content %}
{% block form %}
    {% include 'app1/form.html' %}
{% endblock form %}